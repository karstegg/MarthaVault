name: ğŸ§ª Gemini Commit Test - July 17

on:
  workflow_dispatch:

jobs:
  commit-july17-files:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Simple Commit Test for July 17 Files
      run: |
        echo "ğŸ” Testing simple commit of July 17 files..."
        
        # Check if files exist from previous Gemini run
        TARGET_DIR="daily_production/data/2025-07/17"
        
        if [ -d "$TARGET_DIR" ]; then
          echo "âœ… Directory exists: $TARGET_DIR"
          echo "ğŸ“‚ Files found:"
          ls -la "$TARGET_DIR"
          
          # Configure git
          git config --local user.email "actions@github.com"
          git config --local user.name "GitHub Actions (Test)"
          
          # Add and commit files
          git add daily_production/data/
          
          if git diff --staged --quiet; then
            echo "â„¹ï¸ No changes to commit (files may already be committed)"
          else
            git commit -m "feat: Autonomous daily production reports - 2025-07-17

ğŸ“Š Generated Reports: 4 JSON, 4 Markdown = 8 total files
ğŸ¤– Processing Method: Gemini AI autonomous workflow  
ğŸ“… Report Date: 2025-07-17
ğŸ” Data Source: WhatsApp production messages from mine engineers

**Sites Processed**:
- Gloria
- Nchwaning 2  
- Nchwaning 3
- Shafts & Winders

ğŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"
            
            git push origin master
            echo "âœ… Successfully committed and pushed July 17 reports"
          fi
        else
          echo "âŒ Directory does not exist: $TARGET_DIR"
          echo "Files may not have been created in previous Gemini run"
        fi