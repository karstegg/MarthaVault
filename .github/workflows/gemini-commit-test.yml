name: 🧪 Gemini Commit Test - July 17

on:
  workflow_dispatch:

jobs:
  commit-july17-files:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Simple Commit Test for July 17 Files
      run: |
        echo "🔍 Testing simple commit of July 17 files..."
        
        # Check if files exist from previous Gemini run
        TARGET_DIR="daily_production/data/2025-07/17"
        
        if [ -d "$TARGET_DIR" ]; then
          echo "✅ Directory exists: $TARGET_DIR"
          echo "📂 Files found:"
          ls -la "$TARGET_DIR"
          
          # Configure git
          git config --local user.email "actions@github.com"
          git config --local user.name "GitHub Actions (Test)"
          
          # Add and commit files
          git add daily_production/data/
          
          if git diff --staged --quiet; then
            echo "ℹ️ No changes to commit (files may already be committed)"
          else
            git commit -m "feat: Autonomous daily production reports - 2025-07-17

📊 Generated Reports: 4 JSON, 4 Markdown = 8 total files
🤖 Processing Method: Gemini AI autonomous workflow  
📅 Report Date: 2025-07-17
🔍 Data Source: WhatsApp production messages from mine engineers

**Sites Processed**:
- Gloria
- Nchwaning 2  
- Nchwaning 3
- Shafts & Winders

🤖 Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"
            
            git push origin master
            echo "✅ Successfully committed and pushed July 17 reports"
          fi
        else
          echo "❌ Directory does not exist: $TARGET_DIR"
          echo "Files may not have been created in previous Gemini run"
        fi